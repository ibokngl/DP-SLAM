void HighSlam(TPath *path, TSenseLog *obs)
{
  int i, j;
  char name[16];

  HighInitializeFlags();

  if (h_curGeneration == 0) {
    HighAddToWorldModel(path, obs, 1);

    sprintf(name, "hmap00");
    HighPrintMap(name, h_particle[0].ancestryNode);
    sprintf(name, "rm hmap00.ppm");
    system(name);
  }
  else {
    // Localize off of the path
    HighLocalize(path, obs);

    HighUpdateAncestry(path, obs);

    if ((H_VIDEO) && (h_curGeneration % H_VIDEO == 0)) {
      sprintf(name, "hmap%.2d", (int) (h_curGeneration/H_VIDEO));
      j = 0;
      for (i = 0; i < h_cur_particles_used; i++)
	if (h_particle[i].probability > h_particle[j].probability)
	  j = i;

      HighPrintMap(name, h_particle[j].ancestryNode);
      sprintf(name, "rm hmap%.2d.ppm", (int) (h_curGeneration/H_VIDEO));
      system(name);
    }
  }

  h_curGeneration++;
  HighInitializeFlags();
}
